const linkOpenForm=document.querySelector(".button-help"),closeForm=document.querySelector(".popup-off"),iconClosePopup=document.querySelector(".popup-close-index"),openForm=document.querySelector(".popup-on"),form=openForm.querySelector("form"),login=openForm.querySelector("[name=login]"),email=openForm.querySelector("[name=email]"),comment=openForm.querySelector("[name=comment]");let storage=localStorage.getItem("login");const activeButton=document.querySelector(".button-active"),hide=document.querySelector(".visually-hidden"),linkOpenMap=document.querySelector(".company-map"),openPopupMap=document.querySelector(".popup-map-on"),iconCloseMap=document.querySelector(".map-close"),modalShow=document.querySelector(".modal-show"),modalError=document.querySelector(".modal-error"),slidePerforator=document.querySelector(".card-slider-perfo"),sliderdrill=document.querySelector(".card-slider-drill"),infoSlidePerforator=document.querySelector(".card-slider-slide-perfo"),infoSlideDrill=document.querySelector(".card-slider-slide-drill"),nextSlide=document.querySelector(".slide-up"),backSlide=document.querySelector(".slide-back"),nextSlidePin=document.querySelector(".slide-first-pin-off"),backSlidePin=document.querySelector(".slide-second-pin-on"),linkBuyProduct=document.querySelectorAll(".container-card-link"),popupPurchases=document.querySelector(".popup-catalog-on"),iconClosePopupPurchases=document.querySelector(".popup-close"),linkResumePurchases=document.querySelector(".catalog-button-purchases"),buttons=document.querySelectorAll(".services-item-button"),buttonsInfo=document.querySelectorAll(".services-container-description div");let isStorageSupport=!0;try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}window.addEventListener("keydown",function(e){27===e.keyCode&&closeForm.classList.add("popup-off")&&(e.preventDefault(),openForm.classList.remove("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&openPopupMap.classList.add("visually-hidden")&&e.preventDefault()}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupPurchases.classList.add("popup-catalog-off")&&e.preventDefault()}),linkOpenForm.addEventListener("click",function(e){e.preventDefault(),openForm.classList.remove("popup-off"),openForm.classList.remove("modal-error"),storage?(login.value=storage,email.focus()):login.focus()}),form.addEventListener("submit",function(e){login.value&&email.value&&comment.value?isStorageSupport&&(localStorage.setItem("login",login.value),localStorage.setItem("email",email.value),localStorage.setItem("comment",comment.value)):(e.preventDefault(),openForm.classList.remove("modal-error"),openForm.offsetWidth=openForm.offsetWidth,openForm.classList.add("modal-error"))}),iconClosePopup.addEventListener("click",function(e){e.preventDefault(),openForm.classList.add("popup-off"),openForm.classList.remove("modal-error")}),linkOpenMap.addEventListener("click",function(e){e.preventDefault(),openPopupMap.classList.remove("visually-hidden"),openPopupMap.classList.add("modal-show")}),iconCloseMap.addEventListener("click",function(e){e.preventDefault(),openPopupMap.classList.add("visually-hidden"),openPopupMap.classList.remove("modal-show")}),nextSlide.addEventListener("click",function(e){e.preventDefault(),slidePerforator.classList.toggle("card-slider-drill"),slidePerforator.classList.toggle("card-slider-perfo"),infoSlidePerforator.classList.toggle("visually-hidden"),infoSlideDrill.classList.toggle("visually-hidden"),nextSlidePin.classList.toggle("slide-first-pin-off"),backSlidePin.classList.toggle("slide-second-pin-on")}),backSlide.addEventListener("click",function(e){e.preventDefault(),slidePerforator.classList.toggle("card-slider-drill"),slidePerforator.classList.toggle("card-slider-perfo"),infoSlidePerforator.classList.toggle("visually-hidden"),infoSlideDrill.classList.toggle("visually-hidden"),nextSlidePin.classList.toggle("slide-first-pin-off"),backSlidePin.classList.toggle("slide-second-pin-on")}),iconClosePopupPurchases.addEventListener("click",function(e){e.preventDefault(),popupPurchases.classList.add("popup-catalog-off")}),linkResumePurchases.addEventListener("click",function(e){e.preventDefault(),popupPurchases.classList.add("popup-catalog-off")}),linkBuyProduct.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),popupPurchases.classList.remove("popup-catalog-off")})}),buttons.forEach((e,o,t)=>{e.addEventListener("click",()=>{e.classList.add("button-active"),buttonsInfo[o].classList.remove("visually-hidden"),t.forEach((e,t)=>{t!==o&&(buttons[t].classList.remove("button-active"),buttonsInfo[t].classList.add("visually-hidden"))})})});